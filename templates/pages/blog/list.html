{% extends '../../layouts/base.html' %}

{% block content %}
  <div class="content">
    <h1>
      {% if tag %}Posts in {{ tag }}{% else %}Welcome to the Blog!{% endif %}
    </h1>
    {% if loggedIn %}<a href="/blog/new">New Post</a>{% endif %}
    {% if not tag %}
      <p>
        This is where I write about life, programming, and other interests.
      </p>
    {% endif %}
    <hr>
  </div>
  <ul>
    {% for post in blogPosts %}
      {% if loggedIn or post.Published %}
        <li class="content blog-post-preview">
          <h2>
            <a href="/blog/{{ post.Slug }}">
              {{ post.Title }} {{ post.Published | yesno:",(Draft)" }}
            </a>
            <time datetime{{ blogPost.Date }}>
              {{ post.Date | isoformat }}
            </time>
          </h2>
          <div>
            {{ post.Content | split:"<!--more-->" | first | markdown }}
          </div>
          <div class="blog-post-continue">
            {% include '../../partials/blog_post_tag.html' with tags=post.Tags %}
            <a href="/">
              Continue Reading &raquo;
            </a>
          </div>
        </li>
      {% endif %}
    {% endfor %}
  </ul>

  <div class="pagination">
    <div class="pagination-left">
      {% if blogsPagePrev != blogsPage %}
        <a href="/blog/{{ blogsPagePrev }}" class="left">Previous</a>
      {% endif %}
    </div>

    <div class="pagination-center">
      Page {{ blogsPageFriendly }}
    </div>

    <div class="pagination-right">
      {% if blogsPageNext != blogsPage %}
        <a href="/blog/{{ blogsPageNext }}">Next</a>
      {% else %}
      {% endif %}
    </div>
  </div>
{% endblock %}
